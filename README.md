 HNG DevOps Stage 1 – Automated Deployment

This project contains a fully automated deployment setup using **Bash**, **Docker**, and **NGINX**.  
It clones a Node.js application from GitHub, sets up a server, installs necessary packages, and deploys the app inside a Docker container.

```
## 🚀 Project Overview

This project automates:
- Git repository cloning using a **Personal Access Token (PAT)**
- **SSH connection** to a remote Ubuntu server
- Installation of **Docker**, **Docker Compose**, and **NGINX**
- **Docker container build and run** for a Node.js app
- Configuration of **NGINX** as a reverse proxy
- Validation that the app is running and accessible
 ```
  
## 🧩 Project Structure
```
hng-devops-stage1/
│
├── deploy.sh               # Main automation script
├── README.md               # Project documentation
├── nodeapp/                # Node.js application directory
│   ├── Dockerfile          # Node.js Docker configuration
│   ├── package.json        # Node dependencies
│   └── server.js           # Main server file
```

---

## ⚙️ How It Works

1. **Clone the repository**
   ```bash
   git clone https://github.com/owolabigrace/hng-devops-stage1.git
   cd hng-devops-stage1
   ```

2. **Make the deployment script executable**
   ```bash
   chmod +x deploy.sh
   ```

3. **Run the deployment**
   ```bash
   ./deploy.sh
   ```

4. **Provide inputs when prompted:**
   - GitHub Personal Access Token  
   - Branch name (default: main)  
   - Server username (e.g., ubuntu)  
   - Server IP (`98.91.249.14`)  
   - SSH key path (e.g., `~/.ssh/HNGI.pem`)  
   - Application port (`3000`)

---

## 🐳 Docker Details

The app is containerized using a lightweight **Node.js Docker image**.  
Below is the **Dockerfile** inside `nodeapp/`:

```dockerfile
FROM node:18
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "server.js"]
```

---

## 🌐 NGINX Configuration

The deployment script automatically configures NGINX as a reverse proxy to forward traffic from port **80 → 3000**.

Example configuration (auto-generated by `deploy.sh`):

```nginx
server {
    listen 80;
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection "upgrade";
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

---

## ✅ Validation

Once deployed, the app can be accessed in the browser at:

👉 **http://98.91.249.14**

You can also test using `curl`:
```bash
curl http://98.91.249.14
```

Expected response:
```
Hello from Node.js App!
```

---

## 🧹 Cleanup

To remove the running container:
```bash
docker rm -f myapp
```

To remove old images:
```bash
docker system prune -f
```

---

## 🧠 Author

**Name:** Grace Owolabi  
**Project:** HNG DevOps Stage 1  
**GitHub:** [owolabigrace](https://github.com/owolabigrace)
